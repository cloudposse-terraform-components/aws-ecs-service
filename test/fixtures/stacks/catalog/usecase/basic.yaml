components:
  terraform:
    ecs-service/basic:
      metadata:
        component: target
      vars:
        enabled: true
        name: app
        cluster_attributes: [platform]
        use_lb: false
        containers:
          service:
            name: app
            image: nginx:stable
            port_mappings:
              - containerPort: 80
                hostPort: 80
                protocol: tcp
        task:
          desired_count: 1
          launch_type: FARGATE
          network_mode: awsvpc
        custom_security_group_rules:
          - type: ingress
            protocol: tcp
            from_port: 80
            to_port: 80
            cidr_blocks: ["0.0.0.0/0"]
            description: Allow HTTP from anywhere
